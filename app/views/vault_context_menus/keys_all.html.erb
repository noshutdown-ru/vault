<div id="vault_context_menu">
  <ul>
    <li class="conext_menu copy-key-item" data-copytarget="#copy_body_<%= @key.id %>">
      <i class="fa fa-clipboard fa-fw" ></i>
      <%= l('context_menu.copy_key') %>
      <input style="position: absolute; left: -9999px; top: -9999px;" type="text" id="copy_body_<%= @key.id %>" value="<%=@key.body%>" readonly />
    </li>

    <li class="conext_menu copy-key-item" data-copytarget="#copy_login_<%= @key.id %>">
      <i class="fa fa-clipboard fa-fw"></i>
      <%= l('context_menu.copy_login') %>
      <input style="position: absolute; left: -9999px; top: -9999px;" type="text" id="copy_login_<%= @key.id %>" value="<%=@key.login%>" readonly />
    </li>
    <li class="conext_menu copy-key-item" data-copytarget="#copy_url_<%= @key.id %>">
      <i class="fa fa-clipboard fa-fw" ></i>
      <%= l('context_menu.copy_url') %>
      <input style="position: absolute; left: -9999px; top: -9999px;" type="text" id="copy_url_<%= @key.id %>" value="<%=@key.url%>" readonly />
    </li>
    <% if @key.project.nil? %>
      <!-- Orphaned key - project was deleted -->
      <% if User.current.admin? %>
        <li>
          <%= link_to edit_orphaned_key_path(@key), class: 'conext_menu' do %>
              <i class='fa fa-arrow-right fa-fw'></i>
              <%= l('key.btn.move') %>
          <% end %>
        </li>
        <li>
          <%= link_to orphaned_key_path(@key), class: 'conext_menu', data: {confirm: t('confirm.key.delete')}, method: :delete do %>
              <i class='fa fa-trash fa-fw'></i>
              <%= l('button_delete') %>
          <% end %>
        </li>
      <% end %>
    <% elsif User.current.allowed_to?(:edit_keys, @key.project) %>
      <li>
        <%= link_to project_copy_key_path(@key.project, @key), class: 'conext_menu' do %>
            <i class='fa fa-files-o fa-fw'></i>
            <%= l('context_menu.clone') %>
        <% end %>
      </li>
      <li>
        <%= link_to edit_project_key_path(@key.project, @key), class: 'conext_menu' do %>
            <i class='fa fa-pencil fa-fw'></i>
            <%= l('context_menu.edit') %>
        <% end %>
      </li>
      <li>
        <%= link_to project_key_path(@key.project, @key), class: 'conext_menu', data: {confirm: t('confirm.key.delete')}, method: :delete do %>
            <i class='fa fa-trash fa-fw'></i>
            <%= l('context_menu.delete') %>
        <% end %>
      </li>
    <% else %>
      <li>
        <%= link_to edit_project_key_path(@key.project, @key), class: 'conext_menu' do %>
            <i class='fa fa-eye fa-fw'></i>
            <%= l('context_menu.view') %>
        <% end %>
      </li>
    <% end %>
  </ul>
</div>